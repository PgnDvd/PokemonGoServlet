<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<!--
<meta name="viewport" content="width=device-width, initial-scale=1">
-->
<title>Liquidbase Timeline</title>
<!--
<link rel="stylesheet" href="css/bootstrap/bootstrap.css"></link>
<link rel="stylesheet" href="css/bootstrap/bootstrap-theme.css"></link>
-->
<link rel="stylesheet" href="css/asset-default.css"></link>
<link rel="stylesheet" href="./css/vis/vis-4.15.1.css" type="text/css" />

</head>
<body role="document">
	<script src="./js/jquery/jquery-2.2.0.js"></script>
	<script src="./js/vis/vis-4.16.1.js"></script>
	<script src="./js/servletCall.js"></script>
	<script>
		var servletPath = 'report/liquidbase/timeline';
		var dataParameters = {
			"ips" : getUrlParameter('ips')
		};
		function parseResult(result) {
			var graphObject = JSON.parse(result);

			$("#visualization").empty();
			// DOM element where the Timeline will be attached
			var container = document.getElementById('visualization');

			// Create a DataSet (allows two way data-binding)
			var groups = new vis.DataSet(graphObject.groups);

			// Create a DataSet (allows two way data-binding)
			var items = new vis.DataSet(graphObject.items);

			// Configuration for the Timeline
			var options = {};

			// Create a Timeline
			var timeline = new vis.Timeline(container, items, groups, options);
		}
		callServletWithFunction(servletPath, dataParameters, parseResult);
	</script>

	<div class="container theme-showcase" role="main">
		<div class="row">
			<a href="index.html">index</a>
			<button id="pause" type="button">pause</button>
			<button id="resume" type="button">resume</button>
			<div style="font-size: 10px; display: inline-block;">
				<div style="background-color: green;">BUCKET</div>
				<div style="background-color: red;">BUCKET_TIME</div>
				<div style="background-color: blue;">REAL_TIME</div>
			</div>
		</div>
		<div class="row">
			<img id="loading" src="./img/loading/default.gif"
				style="display: none;" />
		</div>
		<div class="row">
			<table>
				<tr>
					<td style="">
						<div id="report" class="CSSTableGenerator" style=""></div>
					</td>
					<td style="">
						<div id="node" class="CSSTableGenerator" style=""></div>
					</td>
				</tr>
			</table>
		</div>
		<div class="row">
			<table>
				<tr>
					<td style="">
						<form id="form">
							filter:<input id="filter" type="text" name="filter"
								placeholder="" /> profiles:<input id="profiles" type="text"
								name="profiles" placeholder="" /> DEV:<input id="profileDEV"
								type="checkbox" name="profileDEV" placeholder="" value="INA" />
							INA:<input id="profileINA" type="checkbox" name="profileINA"
								placeholder="" value="INA" /> INB:<input id="profileINB"
								type="checkbox" name="profileINB" placeholder="" value="INB" />
							INC:<input id="profileINC" type="checkbox" name="profileINC"
								placeholder="" value="INC" /> STG:<input id="profileSTG"
								type="checkbox" name="profileSTG" placeholder="" value="STG" />
							<button id="submit" type="submit">Search</button>
						</form>
					</td>
				</tr>
				<tr>
					<td style="">
						<div id="report" class="CSSTableGenerator" style=""></div>
					</td>
					<td style="">
						<div id="node" class="CSSTableGenerator" style=""></div>
					</td>
				</tr>
			</table>
		</div>
	</div>
	<div id="visualization"></div>
	<script>
		refreshServletWithFunction(servletPath, dataParameters, parseResult);
	</script>
	<script>
		$(document).ready(
				function() {
					$('#submit').click(
							function(event) {
								$.get(
										'report/liquidbase/timeline?filter='
												+ $('#filter').val()
												+ "&profiles="
												+ $('#profiles').val()
												+ "&profileDEV="
												+ $('#profileDEV').checked
												+ "&profileINA="
												+ $('#profileINA').val()
												+ "&profileINB="
												+ $('#profileINB').val()
												+ "&profileINC="
												+ $('#profileINC').val()
												+ "&profileSTG="
												+ $('#profileSTG').val(), {
										//"topic": $('#topic').val(),
										//"partition" : $('#partition').val(),
										//"offset" : $('#offset').val()
										}, function(result) { // on success
											parseResult(result);
										}, "text").fail(function() { // on failure
									alert("Request failed.");
								});

								event.preventDefault();
								return false;
							});
				});
	</script>

</body>
</html>
